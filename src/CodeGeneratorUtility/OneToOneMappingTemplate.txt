              Field<{0}Type, {0}>()
                .Name("{1}")
                .Description("Related {1}")
                .ResolveAsync(context =>
                {{

                    Func<IEnumerable<CompositeKey>, CancellationToken, Task<IDictionary<CompositeKey, {0}>>> batchLoaderLogic = async (ids, cancelToken) =>
                    {{
                        var queryFactory = queryFactoryHelper.GetQueryFactory();

                        var query = queryFactory
                            .Query("{2}");

                        var whereIn = DataLoaderUtility.GetWhereIn(ids);

                        foreach (var (field, fieldIds) in whereIn)
                        {{
                            query.WhereIn(field, fieldIds);
                        }}

                        var result = await query.GetAsync<{0}>();

                        var dict = new Dictionary<CompositeKey, {0}>(new CompositeKey.MyEqualityComparer());
                        foreach (var r in result)
                        {{
                            var fkFields = new Dictionary<string, object>()
                                {{
                                    {5}
                                }};
                            var key = new CompositeKey(fkFields);
                            dict.TryAdd(key, r);
                        }}

                        return dict;
                    }};

                    var dataLoader = dataLoaderContextAccessor.Context.GetOrAddBatchLoader("{3}_{0}", batchLoaderLogic);
                    var parentFields = new Dictionary<string, object>()
                    {{
                        {4}
                    }};
                    return dataLoader.LoadAsync(new CompositeKey(parentFields));

                }});
